<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*       on 2022-06-15T21:02:35Z       *-->
<!--*   A recent stable commit (2020-08-09):   *-->
<!--* 98f21740783f166a773df4dc83cab5293ab63a4a *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<article class="activity project-like"><h3 class="heading">
<span class="type">Activity</span><span class="space"> </span><span class="codenumber">3.1.4</span><span class="period">.</span>
</h3>
<div class="introduction">
<p>While it's great to have data already organized in a CSV, most data is not already <dfn class="terminology">parsed</dfn> for use directly by a data science library. Instead, data scientists must manually and/or programmatically convert the raw data into a suitable format.</p>
<p>In this activity, we will convert the text of a book in order to count the number of times each of its main characters is mentioned in each chapter.</p>
</div>
<article class="task exercise-like"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<p>Save a plain-text copy of <em class="emphasis">Peter Pan</em> by J. M. Barrie as the file <code class="code-inline tex2jax_ignore">peterpan.txt</code> in the same folder as this notebook by using the link <a class="external" href="https://www.gutenberg.org/ebooks/16" target="_blank"><code class="code-inline tex2jax_ignore">https://www.gutenberg.org/ebooks/16</code></a>. This task may be confirmed by running <code class="code-inline tex2jax_ignore">f=open("peterpan.txt"); print(f.readline()); f.close()</code> in a Code cell. <aside class="aside aside-like"></aside></p></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<p>Open the file and manually delete the header and footer information, so the text file begins at the start of “Chapter 1” and ends with the words “THE END”. Re-run <code class="code-inline tex2jax_ignore">print(open("peterpan.txt").readline())</code>, and you should see the line <code class="code-inline tex2jax_ignore">Chapter 1 PETER BREAKS THROUGH</code>.</p></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(c)</span></h4>
<p>Fix the code in <a href="" class="xref" data-knowl="./knowl/visualization-tables-text-to-table.html" title="Listing 3.1.7">3.1.7</a> to save the chapters of the book to a <code class="code-inline tex2jax_ignore">datascience</code> table.</p>
<figure class="listing figure-like"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-py">with open("peterpan.txt") as book_file:
    # Fix the order of the following lines
    book_table = Table().with_column("Chapter", book_chapters) # creates table of chapters
    book_chapters = book_string.split("Chapter ")[1:] # makes list of strings for each chapter
    book_table.show() # displays table
    book_string = book_file.read() # saves contents of the text file to a string
</code></pre></div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">3.1.7<span class="period">.</span></span><span class="space"> </span>Import book text to a table</figcaption></figure></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(d)</span></h4>
<p>The code in <a href="" class="xref" data-knowl="./knowl/visualization-tables-count-characters.html" title="Listing 3.1.8">3.1.8</a> counts how many times Peter Pan is mentioned in each chapter of the book. Extend this code to also count how many times the Darling siblings Wendy, Michael, and John are mentioned in each chapter.</p>
<figure class="listing figure-like"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-py">book_table = book_table.with_columns([
    "Peter", [c.count("Peter") for c in book_chapters],
])
book_table.show()
</code></pre></div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">3.1.8<span class="period">.</span></span><span class="space"> </span>Counting how many times each character is mentioned</figcaption></figure></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(e)</span></h4>
<p>Sort this table to find the chapter where Wendy is mentioned the most, and the chapter where she is mentioned the least.</p></article></article><span class="incontext"><a href="visualization-tables.html#activity-24" class="internal">in-context</a></span>
</body>
</html>
